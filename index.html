<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>V√©gtelen Jegyzet PRO - Full Font Edition</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Monoton&family=Pinyon+Script&family=Nabla&family=Bungee+Shade&family=Ewert&family=Vast+Shadow&family=Creepster&family=Lobster&family=Righteous&family=Faster+One&family=Special+Elite&family=Orbitron&family=Pacifico&family=Press+Start+2P&family=Permanent+Marker&family=Sacramento&family=Silkscreen&family=Codystar&family=Megrim&family=Fredericka+the+Great&family=UnifrakturMaguntia&family=Wallpoet&family=Syncopate&family=Fascinate+Inline&family=Nosifer&family=Rubik+Glitch&family=Bangers&family=Alumni+Sans+Inline+One&family=Iceberg&family=Glass+Antiqua&family=Kranky&family=Great+Vibes&family=Bruno+Ace+SC&family=VT323&family=Montserrat&family=Nunito&family=Oswald&family=Playfair+Display&family=Spectral&family=Ultra&family=Varela+Round&family=Alegreya&family=Roboto+Serif&family=Roboto+Mono&display=swap" rel="stylesheet">
<style>
:root{--bg:#0e0e0e;--panel:#1a1a1a;--text:#eee;--border:#444;}
.light{--bg:#f5f5f5;--panel:#e0e0e0;--text:#222;--border:#bbb;}
body{margin:0;background:var(--bg);color:var(--text);font-family:Consolas,monospace;}
#topbar{display:flex;flex-wrap:wrap;gap:6px;padding:10px;background:var(--panel);border-bottom:1px solid var(--border);}
button,select,input{background:var(--bg);color:var(--text);border:1px solid var(--border);padding:6px 10px;border-radius:4px;}
textarea{width:100vw;height:calc(100vh - 140px);background:var(--bg);color:var(--text);border:none;padding:20px;box-sizing:border-box;resize:none;line-height:1.6;}
#pdf-helper{position:absolute;left:-9999px;width:800px;padding:40px;white-space:pre-wrap;}
#search{width:130px;}
</style>
</head>
<body>

<div id="topbar">
<select id="notes"></select>
<button onclick="newNote()">+ √öj</button>
<select id="fontFamily" onchange="changeFont()">
<option value="Consolas" style="color:#ffffff;">Consolas (Alap)</option>
<option value="Montserrat" style="color:#00ffcc;font-family:'Montserrat';">Montserrat</option>
<option value="Nunito" style="color:#ffccff;font-family:'Nunito';">Nunito</option>
<option value="Oswald" style="color:#ff6600;font-family:'Oswald';">Oswald</option>
<option value="Playfair Display" style="color:#ffff99;font-family:'Playfair Display';">Playfair Display</option>
<option value="Spectral" style="color:#99ff99;font-family:'Spectral';">Spectral</option>
<option value="Ultra" style="color:#ff3333;font-family:'Ultra';">Ultra (Vastag)</option>
<option value="Varela Round" style="color:#66ccff;font-family:'Varela Round';">Varela Round</option>
<option value="Alegreya" style="color:#ff9900;font-family:'Alegreya';">Alegreya</option>
<option value="Roboto Serif" style="color:#cccccc;font-family:'Roboto Serif';">Roboto Serif</option>
<option value="Roboto Mono" style="color:#00ff00;font-family:'Roboto Mono';">Roboto Mono</option>
<option value="Orbitron" style="color:#00f6ff;font-family:'Orbitron';">Orbitron (Sci-fi)</option>
<option value="Special Elite" style="color:#ffd700;font-family:'Special Elite';">Typewriter (G√©pel√©s)</option>
<option value="VT323" style="color:#00ff00;font-family:'VT323';">Terminal (PC)</option>
<option value="Press Start 2P" style="color:#ffff00;font-family:'Press Start 2P';">8-Bit Retro</option>
<option value="Monoton" style="color:#ff00ff;font-family:'Monoton';">MONOTON (Neon)</option>
<option value="Pinyon Script" style="color:#00ff99;font-family:'Pinyon Script';">Pinyon (K√©z√≠r√°s)</option>
<option value="Creepster" style="color:#ff0000;font-family:'Creepster';">Creepster (Horror)</option>
<option value="Nabla" style="color:#ff6600;font-family:'Nabla';">Nabla (3D)</option>
<option value="Lobster" style="color:#00f6ff;font-family:'Lobster';">Lobster</option>
<option value="Righteous" style="color:#ffff00;font-family:'Righteous';">Righteous</option>
<option value="Bungee Shade" style="color:#ff33ff;font-family:'Bungee Shade';">Bungee</option>
<option value="Permanent Marker" style="color:#ff6600;font-family:'Permanent Marker';">Filctoll</option>
<option value="Sacramento" style="color:#ff99cc;font-family:'Sacramento';">Sacramento</option>
<option value="Silkscreen" style="color:#33ff33;font-family:'Silkscreen';">Pixel</option>
<option value="Codystar" style="color:#00ffff;font-family:'Codystar';">Codystar</option>
<option value="Megrim" style="color:#ffcc00;font-family:'Megrim';">Megrim</option>
<option value="Fredericka the Great" style="color:#cc33ff;font-family:'Fredericka the Great';">Fredericka</option>
<option value="UnifrakturMaguntia" style="color:#7a001f;font-family:'UnifrakturMaguntia';">G√≥tikus</option>
<option value="Wallpoet" style="color:#0080ff;font-family:'Wallpoet';">Graffiti</option>
<option value="Syncopate" style="color:#00ff99;font-family:'Syncopate';">Techno</option>
<option value="Fascinate Inline" style="color:#ffcc00;font-family:'Fascinate Inline';">Fascinate Inline</option>
<option value="Nosifer" style="color:#ff0000;font-family:'Nosifer';">V√©rz≈ë</option>
<option value="Rubik Glitch" style="color:#ffff00;font-family:'Rubik Glitch';">Glitch</option>
<option value="Bangers" style="color:#ff00ff;font-family:'Bangers';">Bangers</option>
<option value="Alumni Sans Inline One" style="color:#00ffff;font-family:'Alumni Sans Inline One';">Alumni Inline</option>
<option value="Iceberg" style="color:#ff6600;font-family:'Iceberg';">Iceberg</option>
<option value="Glass Antiqua" style="color:#ff99cc;font-family:'Glass Antiqua';">Glass Antiqua</option>
<option value="Kranky" style="color:#66ffcc;font-family:'Kranky';">Kranky</option>
<option value="Great Vibes" style="color:#ff99cc;font-family:'Great Vibes';">Great Vibes</option>
<option value="Bruno Ace SC" style="color:#00f6ff;font-family:'Bruno Ace SC';">Bruno Ace</option>
<option value="Arial" style="color:#ffffff;">Arial</option>
<option value="Times New Roman" style="color:#ffffff;">Times New Roman</option>
<option value="Verdana" style="color:#ffffff;">Verdana</option>
</select>

<input type="number" id="fontSize" value="14" min="8" max="100" oninput="changeSize()">
<button onclick="insertDate()">üïí D√°tum</button>
<button onclick="toggleDark()">üåì S√∂t√©t</button>
<button onclick="downloadTxt()">‚¨á TXT</button>
<button onclick="importTxt()">üìÇ Import</button>
<input type="file" id="fileInput" accept=".txt" style="display:none">
<button onclick="downloadPDF()">üìÑ PDF</button>
<button onclick="downloadAllZip()">üì¶ Minden ZIP</button>
<button onclick="undo()">‚¨ÖÔ∏è Vissza</button>
<button onclick="redo()">‚û°Ô∏è El≈ëre</button>
<button onclick="deleteCurrent()">üóë T√∂rl√©s</button>
<button onclick="deleteAll()">‚ö†Ô∏è Reset</button>
<input id="search" placeholder="Keres√©s..." oninput="searchText()">
</div>

<textarea id="editor"></textarea>
<div id="pdf-helper"></div>

<script>
let notes=JSON.parse(localStorage.getItem("MY_NOTES"))||{"√údv√∂zl≈ë":"Minden bet≈±t√≠pus visszaker√ºlt a list√°ba!"};
let current=Object.keys(notes)[0];
const editor=document.getElementById("editor");
const select=document.getElementById("notes");
const fileInput=document.getElementById("fileInput");
const pdfHelper=document.getElementById("pdf-helper");
let dark=true;

// Undo / Redo
const history={};
const maxHistory=50;

function pushHistory(note){if(!history[note]) history[note]={undo:[],redo:[]}; history[note].undo.push(notes[note]); if(history[note].undo.length>maxHistory) history[note].undo.shift(); history[note].redo=[];}

function undo(){if(history[current] && history[current].undo.length>1){history[current].redo.push(history[current].undo.pop()); notes[current]=history[current].undo[history[current].undo.length-1]; editor.value=notes[current]; save();}}

function redo(){if(history[current] && history[current].redo.length>0){let val=history[current].redo.pop(); history[current].undo.push(val); notes[current]=val; editor.value=notes[current]; save();}}

function refresh(){select.innerHTML="";for(let n in notes){let o=document.createElement("option");o.value=n;o.textContent=n;select.appendChild(o);}select.value=current; editor.value=notes[current]; pushHistory(current);}
refresh();

editor.addEventListener("input",()=>{notes[current]=editor.value; pushHistory(current); save();});
select.addEventListener("change",()=>{current=select.value; editor.value=notes[current]; pushHistory(current); save();});

function save(){localStorage.setItem("MY_NOTES",JSON.stringify(notes));}
function newNote(){let n=prompt("Jegyzet neve:"); if(!n||notes[n])return; notes[n]=""; current=n; refresh(); save();}
function deleteCurrent(){if(confirm("Biztosan t√∂rl√∂d ezt a jegyzetet?")){delete notes[current]; current=Object.keys(notes)[0]||"Alap"; refresh(); save();}}
function deleteAll(){if(confirm("MINDEN jegyzet t√∂rl≈ëdik a mem√≥ri√°b√≥l!")){localStorage.clear(); location.reload();}}
function insertDate(){const d=new Date().toLocaleString(); editor.setRangeText("\n["+d+"]\n",editor.selectionStart,editor.selectionEnd,"end"); save();}
function toggleDark(){dark=!dark; document.body.classList.toggle("light",!dark);}
function changeFont(){editor.style.fontFamily=document.getElementById("fontFamily").value;}
function changeSize(){editor.style.fontSize=document.getElementById("fontSize").value+"px";}

function downloadTxt(){const a=document.createElement("a"); a.href=URL.createObjectURL(new Blob([editor.value],{type:"text/plain"})); a.download=current+".txt"; a.click();}
function importTxt(){fileInput.click(); fileInput.onchange=function(){const f=fileInput.files[0]; if(!f)return; const r=new FileReader(); r.onload=e=>{let n=f.name.replace(/\.txt$/i,""); let base=n,c=1; while(notes[n]){n=base+"_"+c;c++;} notes[n]=e.target.result; current=n; refresh(); save();}; r.readAsText(f,"UTF-8");};}
function downloadPDF(){pdfHelper.style.fontFamily=editor.style.fontFamily; pdfHelper.style.fontSize=editor.style.fontSize; pdfHelper.style.background=dark?"#0e0e0e":"#f5f5f5"; pdfHelper.style.color=dark?"#eee":"#222"; pdfHelper.innerText=editor.value; html2canvas(pdfHelper,{scale:2}).then(c=>{const img=c.toDataURL("image/png"); const pdf=new jspdf.jsPDF(); const w=pdf.internal.pageSize.getWidth(); const h=(c.height*w)/c.width; pdf.addImage(img,"PNG",0,0,w,h); pdf.save(current+".pdf");});}
function downloadAllZip(){if(!confirm("Az √∂sszes jegyzet egy ZIP f√°jlba ker√ºl √©s let√∂lt≈ëdik. Folytatod?")) return; const zip=new JSZip(); for(let n in notes){zip.file(n+".txt",notes[n]);} zip.generateAsync({type:"blob"}).then(content=>{const a=document.createElement("a"); a.href=URL.createObjectURL(content); a.download="All_Notes.zip"; a.click();});}
function searchText(){let q=document.getElementById("search").value.toLowerCase(); let pos=editor.value.toLowerCase().indexOf(q); if(pos!==-1){editor.focus(); editor.setSelectionRange(pos,pos+q.length);}}
</script>
</body>
</html>
