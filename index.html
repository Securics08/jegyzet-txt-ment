<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>V√©gtelen Jegyzet PRO</title>

<style>
body {
    margin: 0;
    background: #0e0e0e;
    color: #eee;
    font-family: Consolas, monospace;
}

/* Megn√∂velt fels≈ë s√°v */
#topbar {
    display: flex;
    background: #1a1a1a;
    padding: 10px; /* Nagyobb bels≈ë marg√≥ a fejl√©chez */
    gap: 8px;
    align-items: center;
}

/* Nagyobb gombok √©s beviteli mez≈ëk egyedi sz√≠nekkel */
button, select, input {
    background: #222;
    color: #eee;
    border: 1px solid #444;
    padding: 8px 12px; /* Nagyobb kattint√°si fel√ºlet */
    font-family: Consolas, monospace;
    font-size: 14px;
}

button:hover {
    filter: brightness(1.3);
    cursor: pointer;
}

/* Egyedi sz√≠nek a gombokhoz */
.btn-new { border-left: 4px solid #28a745; } /* Z√∂ld */
.btn-date { border-left: 4px solid #17a2b8; } /* Ci√°n */
.btn-save { border-left: 4px solid #ffc107; } /* S√°rga */
.btn-del-note { color: #ff4d4d; border: 1px solid #ff4d4d; } /* Piros */
.btn-del-all { color: #ff4d4d; border: 2px solid #880000; font-weight: bold; } /* Er≈ës piros */

/* jegyzet ter√ºlet igaz√≠t√°sa a nagyobb fejl√©chez */
textarea {
    width: 100vw;
    height: calc(100vh - 60px); /* Korrig√°lva a megn√∂velt fejl√©chez */
    background: #0e0e0e;
    color: #eee;
    border: none;
    outline: none;
    padding: 20px;
    font-size: 14px;
    resize: none;
    line-height: 1.6;
}

#search {
    border-bottom: 2px solid #555;
    width: 200px;
}
</style>
</head>

<body>

<div id="topbar">
    <select id="notes"></select>
    <button class="btn-new" onclick="newNote()">+ √öj jegyzet</button>
    <select id="fontFamily" onchange="changeFont()">
        <option value="Consolas">Consolas</option>
        <option value="Arial">Arial</option>
        <option value="Verdana">Verdana</option>
        <option value="Georgia">Georgia</option>
        <option value="Times New Roman">Times New Roman</option>
        <option value="Courier New">Courier New</option>
        <option value="Tahoma">Tahoma</option>
        <option value="Trebuchet MS">Trebuchet MS</option>
        <option value="Impact">Impact</option>
        <option value="Comic Sans MS">Comic Sans MS</option>
        <option value="Lucida Console">Lucida Console</option>
        <option value="Segoe UI">Segoe UI</option>
        <option value="Palatino">Palatino</option>
        <option value="Garamond">Garamond</option>
        <option value="Bookman">Bookman</option>
        <option value="Avant Garde">Avant Garde</option>
        <option value="Helvetica">Helvetica</option>
        <option value="Calibri">Calibri</option>
        <option value="Candara">Candara</option>
        <option value="Century Gothic">Century Gothic</option>
        <option value="Franklin Gothic Medium">Franklin Gothic</option>
        <option value="Futura">Futura</option>
        <option value="Geneva">Geneva</option>
        <option value="Gill Sans">Gill Sans</option>
        <option value="Optima">Optima</option>
        <option value="Perpetua">Perpetua</option>
        <option value="Monaco">Monaco</option>
        <option value="Didot">Didot</option>
        <option value="Copperplate">Copperplate</option>
    </select>
    <input type="number" id="fontSize" value="14" min="8" max="100" oninput="changeSize()">
    <button class="btn-date" onclick="insertDate()">üïí D√°tum</button>
    <button class="btn-save" onclick="downloadTxt()">‚¨á Ment√©s TXT</button>
    <button class="btn-del-note" onclick="deleteCurrentNote()">üóë Jegyzet t√∂rl√©se</button>
    <button class="btn-del-all" onclick="deleteAllNotes()">‚ö†Ô∏è Lista t√∂rl√©se</button>
    <input id="search" placeholder="Keres√©s..." oninput="searchText()">
</div>

<textarea id="editor" placeholder="Ide b√°rmit √≠rhatsz vagy bem√°solhatsz..."></textarea>

<script>
let notes = JSON.parse(localStorage.getItem("NOTES")) || { "Alap jegyzet": "" };
let current = localStorage.getItem("CURRENT_NOTE") || "Alap jegyzet";

const editor = document.getElementById("editor");
const notesSelect = document.getElementById("notes");

function refreshList() {
    notesSelect.innerHTML = "";
    for (let n in notes) {
        let opt = document.createElement("option");
        opt.value = n;
        opt.textContent = n;
        notesSelect.appendChild(opt);
    }
    notesSelect.value = current;
}

refreshList();
editor.value = notes[current] || "";

function changeFont() {
    editor.style.fontFamily = document.getElementById("fontFamily").value;
}

function changeSize() {
    let size = document.getElementById("fontSize").value;
    if(size < 8) size = 8;
    if(size > 100) size = 100;
    editor.style.fontSize = size + "px";
}

notesSelect.onchange = () => {
    save();
    current = notesSelect.value;
    localStorage.setItem("CURRENT_NOTE", current);
    editor.value = notes[current];
};

function save() {
    notes[current] = editor.value;
    localStorage.setItem("NOTES", JSON.stringify(notes));
}

editor.addEventListener("input", save);

function newNote() {
    let name = prompt("Jegyzet neve:");
    if (!name || notes[name]) return;
    notes[name] = "";
    current = name;
    refreshList();
    editor.value = "";
    save();
}

function deleteCurrentNote() {
    if (Object.keys(notes).length <= 1) {
        alert("Az utols√≥ jegyzetet nem t√∂r√∂lheted!");
        return;
    }
    if (confirm(`Biztosan t√∂rl√∂d a(z) "${current}" jegyzetet?`)) {
        delete notes[current];
        current = Object.keys(notes)[0];
        localStorage.setItem("CURRENT_NOTE", current);
        refreshList();
        editor.value = notes[current];
        save();
    }
}

function deleteAllNotes() {
    if (confirm("BIZTOSAN t√∂r√∂lni akarod az √ñSSZES jegyzetet? Ez nem vonhat√≥ vissza!")) {
        notes = { "Alap jegyzet": "" };
        current = "Alap jegyzet";
        localStorage.setItem("CURRENT_NOTE", current);
        refreshList();
        editor.value = "";
        save();
    }
}

function insertDate() {
    const d = new Date().toLocaleString();
    editor.value += `\n[${d}]\n`;
    save();
}

function searchText() {
    const q = document.getElementById("search").value.toLowerCase();
    if (!q) return;
    const pos = editor.value.toLowerCase().indexOf(q);
    if (pos !== -1) {
        editor.focus();
        editor.setSelectionRange(pos, pos + q.length);
    }
}

function downloadTxt() {
    const blob = new Blob([editor.value], { type: "text/plain" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = current + ".txt";
    a.click();
}
</script>

</body>
</html>
